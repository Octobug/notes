# 第零章 计算机概论

> <https://linux.vbird.org/linux_basic/centos7/0105computers.php>

## 目录

- [第零章 计算机概论](#第零章-计算机概论)
  - [目录](#目录)
  - [0.1 计算机：辅助人脑的好工具](#01-计算机辅助人脑的好工具)
    - [0.1.1 计算机硬件的五大单元](#011-计算机硬件的五大单元)
    - [0.1.2 一切设计的起点：CPU 的架构](#012-一切设计的起点cpu-的架构)
    - [0.1.3 其他单元的设备](#013-其他单元的设备)
    - [0.1.4 运行流程](#014-运行流程)
    - [0.1.5 计算机分类](#015-计算机分类)
    - [0.1.6 计算机上面常用的计算单位 (容量、速度等)](#016-计算机上面常用的计算单位-容量速度等)
  - [0.2 个人计算机架构与相关设备元件](#02-个人计算机架构与相关设备元件)
    - [0.2.1 执行脑袋运算与判断的 CPU](#021-执行脑袋运算与判断的-cpu)
    - [0.2.2 內存](#022-內存)
    - [0.2.3 显卡](#023-显卡)
    - [0.2.4 硬盘与储存设备](#024-硬盘与储存设备)
    - [0.2.5 扩展卡与接口](#025-扩展卡与接口)
    - [0.2.6 主板](#026-主板)
    - [0.2.7 电源供应器](#027-电源供应器)
    - [0.2.8 选购须知](#028-选购须知)
  - [0.3 数据表示方式](#03-数据表示方式)
    - [0.3.1 数字系统](#031-数字系统)
    - [0.3.2 文字编码系统](#032-文字编码系统)
  - [0.4 软件程序运行](#04-软件程序运行)
    - [0.4.1 机器程序与编译程序](#041-机器程序与编译程序)
    - [0.4.2 操作系统](#042-操作系统)
    - [0.4.3 应用程序](#043-应用程序)
  - [0.5 重点回顾](#05-重点回顾)
  - [0.6 本章习题](#06-本章习题)
  - [0.7 参考数据与延伸阅读](#07-参考数据与延伸阅读)
  - [0.8 针对本文的建议](#08-针对本文的建议)

## 0.1 计算机：辅助人脑的好工具

定义：接受使用者输入指令与数据，经由中央处理器的数学与逻辑单元运算处理后，
产生或储存成有用的信息。

### 0.1.1 计算机硬件的五大单元

- 输入单元
- 输出单元
- CPU
  - 控制单元
  - 算术逻辑单元
- 主内存

### 0.1.2 一切设计的起点：CPU 的架构

- 精简指令集 (Reduced Instruction Set Computer, RISC)
  
  微指令集较为精简，每个指令的执行时间都很短，完成的动作也很单纯，指令的执行效能较佳；
  但是若要做复杂的事情，就要由多个指令来完成。常见的 RISC 微指令集 CPU 主要有 Sun 公司的
  SPARC 系列、 IBM 公司的 Power Architecture (包括 PowerPC) 系列、与 ARM 系列等。

- 复杂指令集 (Complex Instruction Set Computer, CISC)

  与 RISC 不同，CISC 在微指令集的每个小指令可以执行一些更底层的硬件操作，指令数目多而且复杂，
  每条指令的长度并不相同。因为指令执行较为复杂所以每条指令花费的时间较长，
  但每条个别指令可以处理的工作较为丰富。常见的 CISC 微指令集 CPU 主要有 AMD、Intel、VIA
  等的 x86 架构 CPU。

最新的 Intel/AMD x86 架构中，多媒体、虚拟化、省电功能主要有以下重要的微指令集：

- 多媒体微指令集：MMX, SSE, SSE2, SSE3, SSE4, AMD-3DNow!
- 虚拟化微指令集：Intel-VT, AMD-SVM
- 省电功能：Intel-SpeedStep, AMD-PowerNow!
- 64/32 位兼容技术：AMD-AMD64, Intel-EM64T

### 0.1.3 其他单元的设备

最重要的周边设备是主板！主板负责将所有的设备连接在一起，让所有的设备能够进行协调与沟通。
而主板上面最重要的组件就是主板芯片组，这个芯片组可以将所有的设备汇集在一起。

其他重要的设备还有：

- 系统单元：CPU 与内存及主板相关元件，包括网卡、显卡等；
- 存储单元：内存、储存设备包括硬盘、软盘、光盘、磁带等等；
- 输入输出单元：屏幕、键盘、鼠标、打印机、喇叭、投影仪等；

### 0.1.4 运行流程

整部主机当中最重要的是 CPU 与内存，而 CPU 的数据来源通通来自内存，
如果要由过去的经验判断事情时，也要将经验（硬盘）挪到目前的记忆（内存）当中，再交由 CPU 判断。

### 0.1.5 计算机分类

以计算机的复杂度与运算能力进行分类，主要可以分为这几类：

- 超级计算机 (Supercomputer)
- 大型计算机 (Mainframe Computer)
- 迷你计算机 (Minicomputer)
- 工作站 (Workstation)
- 微计算机 (Microcomputer)，又称为个人计算机
  - 台式机
  - 笔记本

### 0.1.6 计算机上面常用的计算单位 (容量、速度等)

- 容量单位：一般使用二进制

  0/1 的单位我们称为 bit。但 bit 实在太小了， 并且在储存数据时每份简单的数据都会使用到 8 个
  bits 的大小来记录，因此定义出 byte 这个单位，他们的关系为：`1 Byte = 8 bits`

  一般来说，容量使用的是二进制，所以 1 GBytes 的文件大小为：`1024x1024x1024` Bytes。
  速度单位则常使用十进制，例如 1GHz 就是 `1000x1000x1000` Hz 的意思。

  | 进制   | Kilo | Mega  | Giga  | Tera  | Peta  | Exa   | Zetta |
  | ------ | ---- | ----- | ----- | ----- | ----- | ----- | ----- |
  | 二进制 | 1024 | 1024K | 1024M | 1024G | 1024T | 1024P | 1024E |
  | 十进制 | 1000 | 1000K | 1000M | 1000G | 1000T | 1000P | 1000E |

- 速度单位：一般使用十进制

  CPU 的运算速度使用 MHz 或 GHz。在网络传输方面使用的是 bit 为单位，因此网络常使用的单位为
  Mbps (Mbits per second)

## 0.2 个人计算机架构与相关设备元件

- Intel 芯片架构

  主板上最重要的是芯片组，而芯片组通常分为两个桥接器来控制各组件的沟通。分别是：

  1. 北桥：负责连结速度较快的 CPU、内存与显示卡等组件；
  2. 南桥：负责连接速度较慢的周边设备，包括硬盘、USB、网络卡等等。

  目前主流架构中，大多会将北桥内存控制器整合到 CPU 封装当中。

- AMD芯片架构

  内存直接与 CPU 沟通而不透过北桥。AMD 为了加速这两者的沟通，将内存控制组件整合到 CPU 当中，
  理论上这样可以加速 CPU 与内存的传输速度。
  
这是两种CPU在架构上面主要的差异点。

### 0.2.1 执行脑袋运算与判断的 CPU

Tips:

> 注意，不同的 CPU 之间不能单纯以频率来判断性能！这是因为每颗 CPU 的微指令集不相同，
> 架构也不见得一样，每次频率能够进行的工作指令数也不同！所以，频率仅能用来比较同款 CPU
> 的速度！

- CPU的『外频』与『倍频』

  CPU 与外部各组件的速度理论上应该要一致才好。但是因为 CPU 需要较强大的运算能力，
  很多判断与数学都是在 CPU 内处理的，因此 CPU 开发商就在 CPU 内再加上一个加速功能，所以 CPU
  有所谓的外频与倍频！

  **外频**指的是 CPU 与外部组件进行数据传输时的速度，**倍频**则是 CPU
  内部用来加速工作效能的一个倍数， 两者相乘才是 CPU 的频率速度。

  Tips:

  > 超频：将 CPU 的倍频或者外频透过主板的设定功能更改成较高频率的一种方式。但因为 CPU
  > 的倍频通常在出厂时已经被锁定而无法修改，因此较常被超频的为外频。

- 32 位与 64 位的 CPU 与总线“宽度”

  内存与 CPU 的沟通速度靠的是外部频率，那么每次工作可以传送的数据量有多大呢？
  那就是系统总线的功能了。一般主板芯片组有分北桥与南桥，北桥的系统总线称为系统系统总线，
  因为是内存传输的主要通道，所以速度较快。南桥则是输入输出(I/O)系统总线，主要联系硬盘、USB、
  网络卡等周边设备。

  北桥所支持的频率可高达 333/400/533/800/1066/1333/1600MHz 等不同频率，
  支持情况依芯片组功能而有不同。北桥所支持的频率我们称为前端系统总线速度 (Front Side Bus,
  FSB)，而每次传送的位数则是系统总线宽度。系统总线频宽则是：FSB x 系统总线宽度』
  亦即每秒钟可传送的最大数据量。目前常见的系统总线宽度有 32/64位(bits)。

  与系统总线宽度类似，CPU 每次能够处理的数据量称为字长大小 (word size)，字长大小依据 CPU
  的设计而有 32 位与 64 位。计算机是 32 或 64 位主要是依据 CPU 解析的字长大小而来。

  Tips:

  > 字长大小与系统总线宽度可以不同。例如在 Pentium Pro 时代，该 CPU 是 32 位处理器，
  > 但当时的芯片组可以设计出 64 位的系统总线宽度。在这样的架构下通常还是以 CPU
  > 的字长大小来称呼该架构。

- CPU等级

  x86 架构 CPU 在 Intel 的 Pentium 系列后就有不统一的脚位与设计，为了将不同种类的 CPU
  规范等级，就有了 i386, i586, i686 等名词出现。目前的 64 位 CPU 统称为 x86_64 等级。

- 超线程（Hyper-Threading, HT）

  现在的 CPU 运算速度都太快了，运算核心经常处于闲置状态。在每一个 CPU 内部将重要的寄存器
  (register) 分成梁群，而让程序分别使用者两群寄存器。也就是说可以有两个程序“同时竞争 CPU
  的运算单元”，而非通过操作系统的多任务切换。

### 0.2.2 內存

个人计算机的内存主要组件为动态随机访问内存 (Dynamic Random Access Memory, DRAM)，
也称为挥发性內存。

DRAM 根据技术的更新分好几代，使用上较广泛的有 SDRAM 与 DDR SDRAM 两种。
这两种内存的差别除了在於脚位与工作电压上的不同之外，DDR 是所谓的双倍数据传送速度
(Double Data Rate)，它可以在一次工作周期中进行两次数据的传送（好比 CPU 的倍频），
所以传输频率方面比 SDRAM 还要好。新一代 PC 大多使用 DDR 内存。

- 多通道设计

  传统的系统总线宽度一般仅达 64 位，为了加大这个宽度，芯片组厂商将两个主内存汇整在一起，
  如果一支内存可达 64 位，两支内存就可以达到 128 位了，这就是双通道的设计理念。
  有些最新的处理器还可以处理三通道、四通道。

- CPU 频率与主内存的关系

  理论上 CPU 与内存的外频要相同才好。

- DRAM 与 SRAM

  除了主内存之外，事实上个人计算机当中还有许许多多的内存存在。最为我们所知的是 CPU
  内的第二层缓存内存。

  由于第二层缓存 (L2 cache) 整合到CPU内部，因此这个 L2 内存的速度必须要 CPU 频率相同。
  使用 DRAM 无法达到这个频率速度，此时就需要静态随机访问内存 (Static Random Access
  Memory, SRAM)。SRAM 在设计上使用电晶体数量较多，价格较高，且不易做成大容量。

- 只读内存 (ROM)

  主板上面的组件非常多，而每个组件的参数又具有可调整性。主板功能是否要启动与该功能的各项参数，
  被记录到主板上的一个称为 CMOS 的芯片上，这个芯片需要额外电源来发挥记录功能。

  BIOS (Basic Input Output System) 是一套程序，这套程序写死在主板上的一个内存芯片中，
  这个内存芯片在没有通电时也能够将数据记录下来，那就是只读内存 (Read Only Memory, ROM)。
  ROM 是一种非挥发性内存。

  另外，固件 (firmware) 很多也是使用 ROM 来进行软件写入的。
  固件像软件一样也是一个被计算机所执行的程序，然而它是对于硬件内部而言更加重要的部分。例如
  BIOS 就是一个固件， BIOS 虽然对於我们日常操作计算机系统没有什么太大的关系，
  但是它却控制著开机时各项硬件参数的获取。现在的 BIOS 通常是写入到类似快闪内存 (flash) 或
  EEPROM 中。

### 0.2.3 显卡

显示卡又称为 VGA (Video Graphics Array)。一般对于图形影像的显示重点在於解析度与色彩深度，
每个图像显示的颜色会占用掉内存， 因此显示卡上面会有一个内存的容量。

显示卡主要也是透过北桥芯片与 CPU、主内存等沟通。

### 0.2.4 硬盘与储存设备

- 硬盘的物理组成
- 盘片上的数据

  整个磁碟盘上头有多个同心圆，而由圆心以放射状的方式分割出磁碟的最小储存单位，那就是磁区
  (Sector)，每个磁区大小为 512Bytes，这个值是不会改变的。而磁区组成一个圆就成为磁轨
  (track)，如果是在多碟的硬盘上面，在所有磁碟盘上面的同一个磁轨可以组成一个磁柱 (Cylinder)，
  磁柱一般是我们分割硬盘时的最小单位。

  容量计算公式：
  `header 数量 * 每个 header 的磁柱数量 * 每个磁柱含有的磁区数量 * 磁区的容量`，
  单位换算为
  `header * cylinder/header * secter/cylinder * 512bytes/secter`，简单的写法如下：
  `Head x Cylinder x Sector x 512 Bytes`。
  一般硬盘制造商在显示硬盘的容量时，大多是以十进制显示，因此市售的 500GB 硬盘理论上仅会有
  460GBytes 左右的容量。

- 传输接口
  - IDE 接口
  - SATA 接口
  - SCSI 接口
    - SAS (Serial Attached SCSI) 接口
  - USB 接口

- 固态硬盘 (Solid State Disk, SSD)

### 0.2.5 扩展卡与接口

### 0.2.6 主板

由於芯片组负责所有设备的沟通，所以事实上芯片组(尤其是北桥)也是一个可能会散发出高热量的组件。
因此在主机板上面常会发现一些外接的小风扇或者是散热片在这组芯片上面。

- 发挥扩展卡性能须考虑的插槽位置

  插在与 CPU 直接连线的插槽性能最佳；而如果插入南桥上的接口，则瓶颈在于 DMI 2.0 管道，
  其数据传输速率大约只有 2GBytes/s。

- 设备 I/O 位址与 IRQ 中断通道

  I/O 位址有点类似每个装置的门牌号码，每个装置都他自己的位址，一般来说，
  不能有两个装置使用同一个 I/O 位址。而除了 I/O 位址之外，还有个 IRQ 中断 (Interrupt)。

  如果 I/O 位址是各装置的门牌号码，那么 IRQ 就是各个门牌连接到邮件中心 (CPU) 的专门路径。
  各装置可以透过 IRQ 中断通道来告知 CPU 该装置的工作情况，以方便 CPU 进行工作分配的任务。

- CMOS 与 BIOS

  CMOS 主要的功能为记录主机板上面的重要参数，包括：
  
  - 系统时间
  - CPU 电压与频率
  - 各项设备的 I/O 位址与 IRQ

- 连接周边设备的接口
  - PS/2 接口：常见的键盘与鼠标接口
  - USB 接口
  - 声音输出、输入与麦克风
  - RJ-45 网络口

### 0.2.7 电源供应器

- 能源转换率：如果你的主机系统需要 300W 的电力，因为电源供应器本身也会消耗掉一部份电力，
  因此你最好挑选 400W 以上的电源供应器。
- 连接接口

### 0.2.8 选购须知

- 几个常见的导致系统不稳定的状态是：
  - 系统超频
  - 电源供应器不稳
  - 内存不足
  - 系统过热

## 0.3 数据表示方式

### 0.3.1 数字系统

如果以十进制来说，3456 的意义为：

```tex
3456=3\times10^3+4\times10^2+5\times10^1+6\times10^0
```

![x](https://render.githubusercontent.com/render/math?math=3456=3\times10^3%2b4\times10^2%2b5\times10^1%2b6\times10^0)

### 0.3.2 文字编码系统

常用的英文编码表为 ASCII 系统，这个编码系统中，每个符号(英文、数字或符号等)都占用 1bytes
的记录， 因此总共会有 28=256 种变化。国际组织 ISO/IEC 制订了 Unicode
编码系统来应对所有国家的文字编码。

## 0.4 软件程序运行

目前的计算机系统将软件分为两大类，一个是系统软件，一个是应用程序。

### 0.4.1 机器程序与编译程序

需要 CPU 工作时，就得参考微指令集的内容，撰写让 CPU 读得懂的指令码给 CPU 执行。

不过这样的流程有几个很麻烦的地方，包括：

- 需要了解机器语言
- 需要了解所有硬件的相关功能函数
- 程序不具有可携性：每个 CPU 都有独特的微指令集，同样的，每个硬件都有其功能函数。因此，为 A
  计算机写的程序，理论上是没有办法在 B 计算机上面运作的。
- 程序具有专一性

为了解决这些问题，计算机科学家设计出一种让人类看的懂得程序语言，然后创造『编译器』
来将这些人类能够写的程序语言转译成为机器能看懂得机器码。

### 0.4.2 操作系统

- 操作系统内核 (Kernel)

  操作系统 (Operating System, OS) 其实也是一组程序，
  这组程序的重点在於管理计算机的所有活动以及驱动系统中的所有硬件。

- 系统调用 (System Call)

  操作系统通常会提供一整组的开发接口给工程师来开发软件，也就是系统调用层。

  - 操作系统的核心层直接参考硬件规格写成，所以同一个操作系统程序不能在不一样的硬件架构下运作。
  - 操作系统只是在管理整个硬件资源，包括CPU、内存、输入输出装置及文件系统。
  - 应用程序的开发都是参考操作系统提供的开发接口，所以该应用程序只能在该操作系统上面运作。

- 核心功能
  - 系统调用接口 (System call interface)
  - 进程管理 (Process control)
  - 内存管理 (Memory management)
  - 文件系统管理 (Filesystem management)
  - 设备驱动 (Device drivers)

- 操作系统与驱动程序，几个小重点：
  - 操作系统必须要能够驱动硬件，如此应用程序才能够使用该硬件功能；
  - 一般来说，操作系统会提供开发接口，让开发商制作他们的驱动程序；
  - 要使用新硬件功能，必须要安装厂商提供的驱动程序才行；
  - 驱动程序是由厂商提供的，与操作系统开发者无关。

### 0.4.3 应用程序

应用程序是参考操作系统提供的开发接口所开发出来软件，这些软件可以让使用者操作，
以达到某些计算机的功能利用。

## 0.5 重点回顾

- 计算机的定义为：『接受使用者输入指令与数据，经由中央处理器的数学与逻辑单元运算处理后，
  以产生或储存成有用的信息』；
- 计算机的五大单元包括：输入单元、 输出单元、CPU 的控制单元、算数逻辑单元与主内存五大部分；
- 数据会流进/流出内存是 CPU 所发布的控制命令，而 CPU 实际要处理的数据则完全来自於主内存；
- CPU 依设计理念主要分为：精简指令集 (RISC) 与复杂指令集 (CISC) 系统；
- 关於CPU的频率部分：外频指的是 CPU 与外部组件进行数据传输时的速度，
  倍频则是 CPU 内部用来加速工作效能的一个倍数， 两者相乘才是 CPU 的频率速度；
- 一般主机板芯片组有分北桥与南桥，北桥的系统总线称为系统系统总线，因为是内存传输的主要通道，
  所以速度较快。南桥就是所谓的输入输出(I/O)系统总线，主要在联系硬盘、USB、网络卡等周边设备；
- 北桥所支持的频率我们称为前端系统总线速度 (Front Side Bus, FSB)，
  而每次传送的位数则是系统总线宽度。
- CPU 每次能够处理的数据量称为字长大小 (word size)，字长大小依据 CPU 的设计而有 32 位与 64
  位。我们现在所称的计算机是 32 或 64 位主要是依据这个 CPU 解析的字长大小而来；
- 个人计算机的主内存主要组件为动态随机访问内存 (Dynamic Random Access Memory, DRAM)，
  至於 CPU 内部的第二层缓存则使用静态随机访问内存 (Static Random Access Memory, SRAM)；
- BIOS (Basic Input Output System) 是一套程序，
  这套程序是写死到主机板上面的一个内存芯片中，这个内存芯片在没有通电时也能够将数据记录下来，
  那就是只读内存 (Read Only Memory, ROM)；
- 显示卡的规格有 PCI/AGP/PCIe，目前的主流为PCIe介面；
- 硬盘的组成为：圆形磁碟盘、机械手臂、磁碟读取头与主轴马达所组成的，其中磁碟盘的组成为磁区、
  磁轨与磁柱；
- 操作系统 (Operating System, OS) 其实也是一组程序，
  这组程序的重点在於管理计算机的所有活动以及驱动系统中的所有硬件。
- 计算机主要以二进位作为单位，常用的磁碟容量单位为bytes，其单位换算为1 Byte = 8bits。
- 最纯净的操作系统仅在驱动与管理硬件，而要使用硬件时，就得需要透过应用软件或者是壳程序 (shell)
  来调用操作系统操纵硬件工作。

## 0.6 本章习题

Linux 环境下查看硬件信息：

- `cat /proc/cpuinfo`
- `lspci`

## 0.7 参考数据与延伸阅读

## 0.8 针对本文的建议

<http://phorum.vbird.org/viewtopic.php?t=31574>
